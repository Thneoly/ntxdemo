package scheduler:actions-http@0.1.0;

interface types {
    /// Re-export types from executor
    record action-def {
        id: string,
        call: string,
        with-params: string,
        exports: list<export-def>,
    }

    record export-def {
        export-type: string,
        name: string,
        scope: option<string>,
        default-value: option<string>,
    }

    record action-outcome {
        status: action-status,
        detail: option<string>,
    }

    enum action-status {
        success,
        failed,
    }
}

interface http-component {
    use types.{action-def, action-outcome};

    init-component: func() -> result<_, string>;
    do-http-action: func(action: action-def) -> result<action-outcome, string>;
    release-component: func() -> result<_, string>;
}

/// HTTP action component implementation
/// Note: This component uses core-libs socket API via Rust dependency (not WIT import)
/// For component composition, see ARCHITECTURE.md
world http-action-component {
    // Socket functionality is provided through Rust dependency on scheduler-core
    // not through WIT imports (see ARCHITECTURE.md for rationale)

    export types;
    export http-component;
}
